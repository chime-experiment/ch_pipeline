cluster:
    name: chimestack
    directory: /home/dwulf/solar_pipeline

    venv:               /home/dwulf/ch_pipeline/venv

    ## Cluster configuration (ignored unless on a cluster)
    name:               chimestack              # Jobname
    nodes:              4                       # Number of nodes to run on
    time:               120                     # Time to run for (in minutes)
    ompnum:             8                       # Number of OpenMP threads
    pernode:            4
    mem:                128000M
    system:            'cedar'


pipeline:

    tasks:

        -   type:       ch_pipeline.core.containers.MonkeyPatchContainers

        -   type:       draco.core.task.SetMPILogging
            params:
                level_rank0: DEBUG
                level_all: WARNING

        -   type:       draco.core.io.FindFiles
            out:        filelist
            params:     sun_files
                

        -   type:       ch_pipeline.core.io.LoadCorrDataFiles
            requires:   filelist
            out:        tstream
            params:     freq_params_N2

        -   type:       ch_pipeline.core.dataquery.QueryInputs
            in:         tstream
            out:        inputmap

        -   type:       ch_pipeline.analysis.solar.SolarGrouper
            in:         tstream
            out:        groupday

        -   type:       ch_pipeline.analysis.solar.SunCalibration
            in:         [groupday, inputmap]
            out:        groupday_sunonly
            params:
                save: Yes
                output_root: "stream_sun_only_"

        #-   type:       ch_pipeline.analysis.solar.SunClean2
        #    in:         [groupday, groupday_sunonly]
        #    out:        groupday_nosun

#=================================== Frequency Selection ===================================

freq_params:
    channel_range:      [32, 48]

freq_params_wide:
    channel_range:      [160, 240]

freq_params_narrow:
    channel_range:      [200, 202]
    
freq_params_N2:  
    freq_physical:      [758, 612]
    #channel_range:      [312, 512, 2]
    
sun_files:
    files:
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/00758340_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/00763430_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/00844863_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/00849952_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/00931385_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/00936474_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01017907_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01022996_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01104429_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01109518_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01190951_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01196041_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01277473_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01282563_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01363995_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01369085_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01450517_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01455607_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01537039_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01542129_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01623562_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01628651_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01710084_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01715173_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01796606_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01801695_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01883128_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01888217_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01969650_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/01974740_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/02056172_0000.h5"
                    -   "/mnt/gong/archive/20181220T235142Z_chimestack_corr/02061262_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00035626_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00040716_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00122148_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00127238_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00208670_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00213760_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00295193_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00300282_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00381715_0000.h5"
                    -   "/mnt/gong/archive/20190114T082356Z_chimestack_corr/00386804_0000.h5"
                    -   "/mnt/gong/archive/20190119T191032Z_chimestack_corr/00000000_0000.h5"
                    -   "/mnt/gong/archive/20190119T191032Z_chimestack_corr/00005089_0000.h5"
                    -   "/mnt/gong/archive/20190119T191032Z_chimestack_corr/00086522_0000.h5"
                    -   "/mnt/gong/archive/20190119T191032Z_chimestack_corr/00091611_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00005089_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00010179_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00091611_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00096701_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00178133_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00183223_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00264655_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00269745_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00351178_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00356267_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00437700_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00442789_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00524222_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00529311_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00610744_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00615833_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00697266_0000.h5"
                    -   "/mnt/gong/archive/20190121T171110Z_chimestack_corr/00702356_0000.h5"
                    -   "/mnt/gong/archive/20190130T162911Z_chimestack_corr/00010179_0000.h5"
                    -   "/mnt/gong/archive/20190130T162911Z_chimestack_corr/00015268_0000.h5"
                    -   "/mnt/gong/archive/20190130T162911Z_chimestack_corr/00096701_0000.h5"
                    -   "/mnt/gong/archive/20190130T162911Z_chimestack_corr/00101790_0000.h5"
                    -   "/mnt/gong/archive/20190130T162911Z_chimestack_corr/00183223_0000.h5"
                    -   "/mnt/gong/archive/20190130T162911Z_chimestack_corr/00188312_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00081432_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00086522_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00167954_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00173044_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00254476_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00259566_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00340998_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00346088_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00427521_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00432610_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00514043_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00519132_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00600565_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00605654_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00687087_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00692176_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00773609_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00778699_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00860131_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00865221_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00946653_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/00951743_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/01033175_0000.h5"
                    -   "/mnt/gong/archive/20190202T202804Z_chimestack_corr/01038265_0000.h5"
                    -   "/mnt/gong/archive/20190214T223846Z_chimestack_corr/00071899_0000.h5"
                    -   "/mnt/gong/archive/20190214T223846Z_chimestack_corr/00076989_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00071253_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00076343_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00157775_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00162865_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00244297_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00249387_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00330819_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00335909_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00417341_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00422431_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00503864_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00508953_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00590386_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00595475_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00676908_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00681997_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00763430_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00768519_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00849952_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00855042_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00936474_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/00941564_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01022996_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01028086_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01109518_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01114608_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01196041_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01201130_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01280893_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01285982_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01367415_0000.h5"
                    -   "/mnt/gong/archive/20190215T225253Z_chimestack_corr/01372504_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00020358_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00025447_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00106880_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00111969_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00193402_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00198491_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00279924_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00285014_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00366446_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00371536_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00452968_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00458058_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00534401_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00539490_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00620923_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00626012_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00707445_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00712535_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00794683_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00799772_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00881911_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00887000_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00968681_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/00973771_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01056019_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01061108_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01143266_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01148356_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01225425_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01230514_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01311967_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01317056_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01398489_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01403578_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01485011_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01490697_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01572129_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01577219_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01658652_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01663741_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01745174_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01750263_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01831696_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01836785_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01918218_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/01923307_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/02004740_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/02009830_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/02091262_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/02096352_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/02177784_0000.h5"
                    -   "/mnt/gong/archive/20190315T133319Z_chimestack_corr/02182874_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00015268_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00020358_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00101790_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00106880_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00188312_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00193402_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00274834_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00279924_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00361357_0000.h5"
                    -   "/mnt/gong/archive/20190410T141411Z_chimestack_corr/00366446_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00020358_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00025447_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00106880_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00111969_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00193402_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00198491_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00279924_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00285014_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00366446_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00371536_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00452968_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00458058_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00539490_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00544580_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00626012_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00631102_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00712535_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00717624_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00799057_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00804146_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00885579_0000.h5"
                    -   "/mnt/gong/archive/20190415T121533Z_chimestack_corr/00890668_0000.h5"